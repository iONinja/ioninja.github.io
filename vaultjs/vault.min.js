Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&Object.defineProperty(this,a,{get:e,set:f,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(a){var b=this[a];delete this[a],this[a]=b}});var vault={_load:function(){localStorage.vault?(o=JSON.parse(localStorage.vault),this._variables=o.variables,this._pages=o.pages,this.domain.new=!1,this.domain.returning=!0):localStorage.vault=JSON.stringify({pages:[],variables:{}}),l=window.location.pathname,this._pages.indexOf(l)<0?this._pages.push(l):(this.page.new=!1,this.page.returning=!0)},_save:function(){localStorage.vault=JSON.stringify({pages:this._pages,variables:this._variables})},_variables:{},_names:[],_pages:[],domain:{new:!0,returning:!1},page:{new:!0,returning:!1},sync:function(){for(i=0;i<arguments.length;i++)n=arguments[i],n&&(this._names.push(n),void 0!=this._variables[n]?window[n]=this._variables[n]:this._variables[n]=window[n]),this._save(),window.watch(n,function(a,b,c){return vault._names.indexOf(a)>-1&&(vault._variables[a]=c,vault._save()),c})},wipe:function(){this._variables={},this._names=[],this.domain.new=!0,this.domain.returning=!1,this.page.new=!0,this.page.returning=!1,delete localStorage.vault}};vault._load();
